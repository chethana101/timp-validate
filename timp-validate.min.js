!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?(module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("Timp Validate requires a window with a document");return t(e)},module.exports=Form):t(e)}("undefined"!=typeof window?window:this,function(e,t){e.Form=function(e){var t={};return t.error=0,null!=e&&("string"==typeof e?t.forms=document.querySelector(e).querySelectorAll("[required]"):t.forms=e.querySelectorAll("[required]")),t.init=function(e){e?.parentClass?localStorage.setItem("parentClass",e.parentClass):localStorage.removeItem("parentClass"),e?.errorElement?localStorage.setItem("errorElement",e.errorElement):localStorage.removeItem("errorElement")},t.validate=function(r=null){try{let a=document.querySelectorAll('[data-validate="true"]');a&&a.forEach(a=>{a.addEventListener("submit",l=>{if(l.preventDefault(),this.onValidate(r)&&r?.onSubmit==void 0&&0==t.error)a.submit();else{var s;r&&r.onSubmit&&(0,t.optionCheck).every(e=>!0===e)&&0==t.error&&r.onSubmit(document.querySelector(e),l)}})})}catch(l){}},t.onValidate=function(e=null){t.error=0,t.optionCheck=[];if(t.forms.forEach(r=>{let a=null,l=null;if(e&&e?.rules?.fields){let s=e.rules.fields;null==(l=this.getObjectData(s,r.name,"message"))&&(l=this.requiredFor(r.type)?"required":r.type),a=this.getObjectData(s,r.name,"set")}""==r.value?(t.error++,this.setMessage(r,{message:l,set:a})):!1==this.dataTypeValidate(r)?(t.error++,this.setMessage(r,{message:r.type,set:a})):this.setMessage(r,{remove:!0})}),e){let r=e?.rules?.equalTo;r&&t.optionCheck.push(this.passData("equalTo",r,{rules:e.rules}));let a=e?.rules?.length;return a&&t.optionCheck.push(this.passData("lengthCheck",a,{rules:e.rules})),this.verifyMethods(e.rules),t.optionCheck}return 0==t.error},t.passData=function(e,t,r){let a=[];try{var l;if(!Array.isArray(t))return this[e](t,r);return t.forEach(t=>{a.push(this[e](t,r))}),a.every(e=>!0===e)}catch(s){throw s}},t.dataTypeValidate=function(e){switch(e.type){case"email":return this.emailValidate(e.value);case"url":return this.urlValidate(e.value);case"checkbox":return this.checkBoxValidate(e);case"radio":return this.radioButtonValidate(e)}},t.requiredFor=function(e){let t=!1;return["text","url","email"].forEach(r=>{e==r&&(t=!0)}),t},t.getObjectData=function(e,t,r){let a=null;return Array.isArray(e)?e.forEach(e=>{e.element==t&&(a=e[r])}):e.element==t&&(a=e[r]),a},t.format=function(e,t){let r=0;return t?.size&&(r=t.size),e.replace(/({).*?(})/,"$1"+r+"$2").replace(/[{}]/g,"")},t.getError=function(e=null,t){let r={required:"This field is required",email:"Please enter a valid email address",url:"Invalid url",file:"No file selected",checkbox:"Checkbox not selected",radio:"Radio button not selected",number:"Number field is required",password:"Password field is required",equalTo:"Please enter the same value again",max:this.format("Please enter a value less than or equal to {0}",t),min:this.format("Please enter a value greater than or equal to {0}",t),maxLength:this.format("Please enter no more than {0} characters",t),minLength:this.format("Please enter at least {0} characters",t)};return r[e]?r[e]:t?.message?t.message:null==e?r.required:e},t.setMessage=function(e,t=null,r=null){var a;t&&void 0==t.set||t&&null==t.set?(a=e.parentElement,localStorage.getItem("parentClass")&&(a=e.closest(localStorage.getItem("parentClass")))):a=document.querySelector(t.set),document.querySelectorAll('[data-error-id="'+e.name+'-error"]')[0]&&(document.getElementById(e.name+"-error").remove(),e.removeAttribute("data-error-id"));let l=this.getLabel(e);l.innerText=this.getError(t.message,r),a.appendChild(l),t&&t.remove&&document.querySelectorAll('[data-error-id="'+e.name+'-error"]')[0]&&(document.getElementById(e.name+"-error").remove(),e.removeAttribute("data-error-id"))},t.getLabel=function(e){let t=`
            .form-error { 
                font-size: 14px;
                font-weight: 500;
                color: var(--red);
                display: inline-block;
                margin-top: 5px;
            }
        `;if(void 0==document.querySelectorAll('[data-form-error-style="true"]')[0]){let r=document.createElement("style");r.setAttribute("data-form-error-style","true"),r.innerHTML=t,document.querySelector("head").appendChild(r)}e.setAttribute("data-error-id",e.name+"-error");let a=document.createElement(localStorage.getItem("errorElement")??"label");return a.id=e.name+"-error",a.classList.add("form-error"),a},t.verifyMethods=function(e){return new Promise((r,a)=>{let l=["equalTo","password","length","fields","onSubmit"];if(e){let s=Object.keys(e);for(let n=0;n<s.length;n++){let i=!1;if(l.forEach(e=>{s[n]==e&&(i=!0)}),!i){if(e[s[n]]?.method){let o=e[s[n]]?.element?document.getElementsByName(e[s[n]].element)[0]:a("Element not found"),u=e[s[n]]?.set?e[s[n]].set:null,m=e[s[n]]?.message?e[s[n]].message:"equalTo",d=e[s[n]].method(document.getElementsByName(e[s[n]].element)[0]);t.optionCheck.push(d),!1==d&&this.setMessage(o,{message:m,set:u})}else a("Invalid parameter ("+s[n]+") | 'method' is missing")}}r()}})},t.setValidateRule=function(){let e=['[data-validate="true"]','[data-validate="all"]'];for(let t=0;t<e.length;t++)document.querySelectorAll(e)&&document.querySelectorAll(e).forEach(e=>{e.setAttribute("novalidate","novalidate")})},t.redirectWhenValid=function(){let e=document.querySelectorAll('[data-validate="all"]');e&&e.forEach(e=>{e.addEventListener("submit",r=>{r.preventDefault(),t.forms=e.querySelectorAll("[required]"),this.onValidate(),0==t.error&&e.submit()})})},t.equalTo=function(e,t){var r;let a=[],l=null,s="equalTo",n=t.rules,i=Array.isArray(e.element)?e.element:[e.element];return e.set&&(l=e.set),e.message&&(s=e.message),i.forEach(e=>{if(""==document.getElementsByName(e)[0].value){let t=null;void 0!=n&&(t=this.getObjectData(n,e,"message")),""==t&&(t="required"),this.setMessage(document.getElementsByName(e)[0],{message:t,set:l})}a.push(document.getElementsByName(e)[0].value)}),!a.includes("")&&(!1!=(r=a).every(e=>e===r[0])||(this.setMessage(document.getElementsByName(i[1])[0],{message:s,set:l}),!1))},t.lengthCheck=function(e){let t="length",r=null,a=!1,l=null,s={message:null,size:null};return(l=Array.isArray(e.element)?e.element:[e.element]).forEach(l=>{let n=document.getElementsByName(l)[0],i=e?.logic;switch(i){case"max":this.numberValidate(n.value)?parseInt(n.value)>e.size&&(a=!0,t="max"):(a=!0,s.message="Value should be a number");break;case"min":this.numberValidate(n.value)?parseInt(n.value)<e.size&&(a=!0,t="min"):(a=!0,s.message="Value should be a number");break;case"maxLength":parseInt(n.value.length)>e.size&&(a=!0,t="maxLength");break;case"minLength":parseInt(n.value.length)<e.size&&(a=!0,t="minLength")}s.size=e.size,e?.message&&(t=e.message),e?.set&&(r=e.set),a&&this.setMessage(n,{message:t,set:r},s)}),!a},t.emailValidate=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},t.urlValidate=function(e){return!!RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},t.checkBoxValidate=function(e){return!!e.checked},t.radioButtonValidate=function(e){if(1==document.getElementsByName(e.name).length)return!!e.checked;{let t=document.getElementsByName(e.name),r=0;for(let a=0;a<t.length;a++)t[a].checked&&r++;return 1==r}},t.numberValidate=function(e){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},t.setValidateRule(),t.redirectWhenValid(),t}});