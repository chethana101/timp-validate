!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?(module.exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("Timp Validate requires a window with a document");return t(e)},module.exports=Form):t(e)}("undefined"!=typeof window?window:this,function(e,t){e.Form=function(e){var t={};return t.error=0,null!=e&&("string"==typeof e?document.body.contains(document.querySelector(e))&&(t.forms=document.querySelector(e).querySelectorAll("[required]")):document.body.contains(e)&&(t.forms=e.querySelectorAll("[required]"))),t.init=function(e){e?.parentClass?localStorage.setItem("parentClass",e.parentClass):localStorage.removeItem("parentClass"),e?.errorElement?localStorage.setItem("errorElement",e.errorElement):localStorage.removeItem("errorElement"),e?.elementStyle?localStorage.setItem("elementStyle",e.elementStyle):localStorage.removeItem("elementStyle"),e?.focusOutValidate?localStorage.setItem("focusOutValidate",e.focusOutValidate):localStorage.removeItem("focusOutValidate")},t.validate=function(r=null){try{t.options=r;let a=document.querySelectorAll('[data-validate="true"]');a&&a.forEach(a=>{a.addEventListener("submit",l=>{if(l.preventDefault(),this.onValidate(r)&&r?.onSubmit==void 0&&0==t.error)a.submit();else{var s;r&&r.onSubmit&&(0,t.optionCheck).every(e=>!0===e)&&0==t.error&&r.onSubmit("string"==typeof e?document.querySelector(e):e,l)}})})}catch(l){}},t.onValidate=function(e=null,r=null){t.error=0,t.optionCheck=[];let a=null;if((a=r?[r]:t.forms).forEach(r=>{let a=null,l=null;if(e&&e?.rules?.fields){let s=e.rules.fields;null==(l=this.getObjectData(s,r.name,"message"))&&(l=this.requiredFor(r.type)?"required":r.type),a=this.getObjectData(s,r.name,"set")}""==r.value?(t.error++,this.setMessage(r,{message:l,set:a})):!1==this.dataTypeValidate(r)?(t.error++,this.setMessage(r,{message:r.type,set:a})):this.setMessage(r,{remove:!0})}),e){let l=e?.rules?.equalTo;l&&t.optionCheck.push(this.passData("equalTo",l,{rules:e.rules}));let s=e?.rules?.length;return s&&t.optionCheck.push(this.passData("lengthCheck",s,{rules:e.rules})),this.verifyMethods(e.rules),t.optionCheck}return 0==t.error},t.onFocusOut=function(){localStorage.getItem("focusOutValidate")&&t.forms.forEach(e=>{e.addEventListener("focusout",()=>{this.onValidate(t.options,e)})})},t.passData=function(e,t,r){let a=[];try{var l;if(!Array.isArray(t))return this[e](t,r);return t.forEach(t=>{a.push(this[e](t,r))}),a.every(e=>!0===e)}catch(s){throw s}},t.dataTypeValidate=function(e){switch(e.type){case"email":return this.emailValidate(e.value);case"url":return this.urlValidate(e.value);case"checkbox":return this.checkBoxValidate(e);case"radio":return this.radioButtonValidate(e);case"date":return this.dateValidate(e)}},t.requiredFor=function(e){let t=!1;return["text","url","email"].forEach(r=>{e==r&&(t=!0)}),t},t.getObjectData=function(e,t,r){let a=null;return Array.isArray(e)?e.forEach(e=>{e.element==t&&(a=e[r])}):e.element==t&&(a=e[r]),a},t.format=function(e,t){let r=0;return t?.size&&(r=t.size),e.replace(/({).*?(})/,"$1"+r+"$2").replace(/[{}]/g,"")},t.getError=function(e=null,t,r=null){let a={required:"This field is required",email:"Please enter a valid email address",url:"Invalid url",file:"No file selected",checkbox:"Checkbox not selected",radio:"Radio button not selected",number:"Number field is required",password:"Password field is required",equalTo:"Please enter the same value again",fileType:this.format("Invalid file type {0}",t),max:this.format("Please enter a value less than or equal to {0}",t),min:this.format("Please enter a value greater than or equal to {0}",t),maxLength:this.format("Please enter no more than {0} characters",t),minLength:this.format("Please enter at least {0} characters",t)};return a[e]?a[e]:t?.message?t.message:null==e?a.required:r.type==e?a.required:e},t.setMessage=function(e,r=null,a=null){var l;if(r&&void 0==r.set||r&&null==r.set){if(void 0==e)throw Error("Element not found");l=e.parentElement,!localStorage.getItem("parentClass")||(l=e.closest(localStorage.getItem("parentClass")))||(l=document.querySelectorAll(localStorage.getItem("parentClass"))[0])}else l=document.querySelector(r.set);document.querySelectorAll('[data-error-id="'+e.name+'-error"]')[0]&&document.getElementById(e.name+"-error")&&(document.getElementById(e.name+"-error").remove(),e.removeAttribute("data-error-id"));let s=this.getLabel(e);s.innerText=this.getError(r.message,a,e),l.appendChild(s),0!=t.error&&e.focus(),r&&r.remove&&document.querySelectorAll('[data-error-id="'+e.name+'-error"]')[0]&&document.getElementById(e.name+"-error")&&(document.getElementById(e.name+"-error").remove(),e.removeAttribute("data-error-id"))},t.getLabel=function(e){let t=`
              .form-error { 
                  font-size: 14px;
                  font-weight: 500;
                  color: #FF0000;
              }
          `;if(void 0==document.querySelectorAll('[data-form-error-style="true"]')[0]){let r=document.createElement("style");r.setAttribute("data-form-error-style","true"),r.innerHTML=t,document.querySelector("head").appendChild(r)}e.setAttribute("data-error-id",e.name+"-error");let a=document.createElement(localStorage.getItem("errorElement")??"label");return a.id=e.name+"-error",localStorage.getItem("elementStyle")?a.classList.add(localStorage.getItem("elementStyle")):a.classList.add("form-error"),a},t.verifyMethods=function(e){return new Promise((r,a)=>{let l=["equalTo","password","length","fields","onSubmit"];if(e){let s=Object.keys(e);for(let n=0;n<s.length;n++){let i=!1;if(l.forEach(e=>{s[n]==e&&(i=!0)}),!i){if(e[s[n]]?.method){let o=e[s[n]]?.element?document.getElementsByName(e[s[n]].element)[0]:a("Element not found"),u=e[s[n]]?.set?e[s[n]].set:null,m=e[s[n]]?.message?e[s[n]].message:"equalTo",d=e[s[n]].method(document.getElementsByName(e[s[n]].element)[0]);t.optionCheck.push(d),!1==d&&this.setMessage(o,{message:m,set:u})}else a("Invalid parameter ("+s[n]+") | 'method' is missing")}}r()}})},t.setValidateRule=function(){let e=['[data-validate="true"]','[data-validate="all"]'];for(let t=0;t<e.length;t++)document.querySelectorAll(e)&&document.querySelectorAll(e).forEach(e=>{e.setAttribute("novalidate","novalidate")})},t.redirectWhenValid=function(){if(document.body.contains(document.querySelectorAll('[data-validate="all"]')[0])){let e=document.querySelectorAll('[data-validate="all"]');e&&e.forEach(e=>{e.addEventListener("submit",r=>{r.preventDefault(),t.forms=e.querySelectorAll("[required]"),this.onValidate(),0==t.error&&e.submit()})})}},t.equalTo=function(e,t){var r;let a=[],l=null,s="equalTo";t.rules;let n=Array.isArray(e.element)?e.element:[e.element];return e.set&&(l=e.set),e.message&&(s=e.message),n.forEach(e=>{(!document.body.contains(document.getElementsByName(e)[0])||""!=document.getElementsByName(e)[0].value)&&document.body.contains(document.getElementsByName(e)[0])&&a.push(document.getElementsByName(e)[0].value)}),!a.includes("")&&(!1!=(r=a).every(e=>e===r[0])||(this.setMessage(document.getElementsByName(n[1])[0],{message:s,set:l}),!1))},t.lengthCheck=function(e){let t="length",r=null,a=!1,l=null,s={message:null,size:null};return(l=Array.isArray(e.element)?e.element:[e.element]).forEach(l=>{let n=document.getElementsByName(l)[0],i=e?.logic;switch(i){case"max":this.numberValidate(n.value)?parseInt(n.value)>e.size&&(a=!0,t="max"):(a=!0,s.message="Value should be a number");break;case"min":this.numberValidate(n.value)?parseInt(n.value)<e.size&&(a=!0,t="min"):(a=!0,s.message="Value should be a number");break;case"maxLength":parseInt(n.value.length)>e.size&&(a=!0,t="maxLength");break;case"minLength":parseInt(n.value.length)<e.size&&(a=!0,t="minLength")}s.size=e.size,e?.message&&(t=e.message),e?.set&&(r=e.set),a&&this.setMessage(n,{message:t,set:r},s)}),!a},t.emailValidate=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},t.urlValidate=function(e){return!!RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},t.checkBoxValidate=function(e){return!!e.checked},t.radioButtonValidate=function(e){if(1==document.getElementsByName(e.name).length)return!!e.checked;{let t=document.getElementsByName(e.name),r=0;for(let a=0;a<t.length;a++)t[a].checked&&r++;return 1==r}},t.numberValidate=function(e){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},t.dateValidate=function(e){return Date.parse(e.value)},t.setValidateRule(),t.redirectWhenValid(),t.forms&&t.onFocusOut(),t}});