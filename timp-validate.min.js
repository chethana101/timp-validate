/******/ (() => {
  var __webpack_exports__ = {};

  function Form(attr) {
    var data = {};
    data.error = 0;

    if (attr != null) {
      if (typeof attr === "string") {
        data.forms = document
          .querySelector(attr)
          .querySelectorAll("[required]");
      } else {
        data.forms = attr.querySelectorAll("[required]");
      }
    }

    data.init = function (option) {
      option !== null && option !== void 0 && option.parentClass
        ? localStorage.setItem("parentClass", option.parentClass)
        : localStorage.removeItem("parentClass");

      option !== null && option !== void 0 && option.errorElement
        ? localStorage.setItem("errorElement", option.errorElement)
        : localStorage.removeItem("errorElement");
    };

    data.validate = function () {
      var _this = this;
      var options =
        arguments.length > 0 && arguments[0] !== undefined
          ? arguments[0]
          : null;
      try {
        var forms = document.querySelectorAll('[data-validate="true"]');
        if (forms) {
          forms.forEach(function (form) {
            form.addEventListener("submit", function (event) {
              event.preventDefault();

              var isTrue = function isTrue(arr) {
                return arr.every(function (v) {
                  return v === true;
                });
              };
              if (
                _this.onValidate(options) &&
                (options === null || options === void 0
                  ? void 0
                  : options.onSubmit) == undefined &&
                data.error == 0
              ) {
                form.submit();
              } else {
                if (
                  options &&
                  options.onSubmit &&
                  isTrue(data.optionCheck) &&
                  data.error == 0
                ) {
                  options.onSubmit(document.querySelector(attr), event);
                }
              }
            });
          });
        }
      } catch (error) {}
    };

    data.onValidate = function () {
      var _this2 = this;
      var option =
        arguments.length > 0 && arguments[0] !== undefined
          ? arguments[0]
          : null;
      data.error = 0;
      data.optionCheck = [];
      var elements = data.forms;

      elements.forEach(function (element) {
        var _option$rules;
        var setTo = null;
        var messageType = null;

        if (
          option &&
          option !== null &&
          option !== void 0 &&
          (_option$rules = option.rules) !== null &&
          _option$rules !== void 0 &&
          _option$rules.fields
        ) {
          var fields = option.rules.fields;

          messageType = _this2.getObjectData(fields, element.name, "message");

          if (messageType == null) {
            messageType = _this2.requiredFor(element.type)
              ? "required"
              : element.type;
          }

          setTo = _this2.getObjectData(fields, element.name, "set");
        }

        if (element.value == "") {
          data.error++;
          _this2.setMessage(element, {
            message: messageType,
            set: setTo,
          });
        } else {
          if (_this2.dataTypeValidate(element) == false) {
            data.error++;
            _this2.setMessage(element, {
              message: element.type,
              set: setTo,
            });
          } else {
            _this2.setMessage(element, {
              remove: true,
            });
          }
        }
      });

      if (option) {
        var _option$rules2, _option$rules3;

        var equalTo =
          option === null || option === void 0
            ? void 0
            : (_option$rules2 = option.rules) === null ||
              _option$rules2 === void 0
            ? void 0
            : _option$rules2.equalTo;
        if (equalTo) {
          data.optionCheck.push(
            this.passData("equalTo", equalTo, {
              rules: option.rules,
            })
          );
        }

        var length =
          option === null || option === void 0
            ? void 0
            : (_option$rules3 = option.rules) === null ||
              _option$rules3 === void 0
            ? void 0
            : _option$rules3.length;
        if (length) {
          data.optionCheck.push(
            this.passData("lengthCheck", length, {
              rules: option.rules,
            })
          );
        }

        this.verifyMethods(option.rules);
        return data.optionCheck;
      }
      return data.error == 0 ? true : false;
    };

    data.passData = function (methodName, optionType, data) {
      var _this3 = this;
      var arrayBoolean = [];
      try {
        if (Array.isArray(optionType)) {
          var isTrue = function isTrue(arr) {
            return arr.every(function (v) {
              return v === true;
            });
          };
          optionType.forEach(function (option) {
            arrayBoolean.push(_this3[methodName](option, data));
          });
          return isTrue(arrayBoolean);
        } else {
          return this[methodName](optionType, data);
        }
      } catch (error) {
        throw error;
      }
    };

    data.dataTypeValidate = function (element) {
      switch (element.type) {
        case "email":
          return this.emailValidate(element.value);
        case "url":
          return this.urlValidate(element.value);
        case "checkbox":
          return this.checkBoxValidate(element);
        case "radio":
          return this.radioButtonValidate(element);
      }
    };

    data.requiredFor = function (elementType) {
      var types = ["text", "url", "email"];
      var isTrue = false;
      types.forEach(function (type) {
        if (elementType == type) {
          isTrue = true;
        }
      });
      return isTrue;
    };

    data.getObjectData = function (dataObj, attrName, need) {
      var returnData = null;
      if (Array.isArray(dataObj)) {
        dataObj.forEach(function (dataValue) {
          if (dataValue.element == attrName) {
            returnData = dataValue[need];
          }
        });
      } else {
        if (dataObj.element == attrName) {
          returnData = dataObj[need];
        }
      }
      return returnData;
    };

    data.format = function (source, requiredData) {
      var size = 0;
      if (
        requiredData !== null &&
        requiredData !== void 0 &&
        requiredData.size
      ) {
        size = requiredData.size;
      }
      var data = source.replace(/({).*?(})/, "$1" + size + "$2");
      return data.replace(/[{}]/g, "");
    };

    data.getError = function () {
      var type =
        arguments.length > 0 && arguments[0] !== undefined
          ? arguments[0]
          : null;
      var requiredData = arguments.length > 1 ? arguments[1] : undefined;
      var message = {
        required: "This field is required",
        email: "Please enter a valid email address",
        url: "Invalid url",
        file: "No file selected",
        checkbox: "Checkbox not selected",
        radio: "Radio button not selected",
        number: "Number field is required",
        password: "Password field is required",
        equalTo: "Please enter the same value again",
        max: this.format(
          "Please enter a value less than or equal to {0}",
          requiredData
        ),
        min: this.format(
          "Please enter a value greater than or equal to {0}",
          requiredData
        ),
        maxLength: this.format(
          "Please enter no more than {0} characters",
          requiredData
        ),
        minLength: this.format(
          "Please enter at least {0} characters",
          requiredData
        ),
      };

      for (key in message) {
        if (type == key) {
          return message[key];
        }
      }

      if (
        requiredData !== null &&
        requiredData !== void 0 &&
        requiredData.message
      ) {
        return requiredData.message;
      }

      if (type == null) {
        return message.required;
      } else {
        return type;
      }
    };

    data.setMessage = function (element) {
      var option =
        arguments.length > 1 && arguments[1] !== undefined
          ? arguments[1]
          : null;
      var requiredData =
        arguments.length > 2 && arguments[2] !== undefined
          ? arguments[2]
          : null;
      var parent;

      if (
        (option && option.set == undefined) ||
        (option && option.set == null)
      ) {
        parent = element.parentElement;

        if (localStorage.getItem("parentClass")) {
          parent = element.closest(localStorage.getItem("parentClass"));
        }
      } else {
        parent = document.querySelector(option.set);
      }

      if (
        document.querySelectorAll(
          '[data-error-id="' + element.name + "-error" + '"]'
        )[0]
      ) {
        document.getElementById(element.name + "-error").remove();
        element.removeAttribute("data-error-id");
      }

      var label = this.getLabel(element);
      label.innerText = this.getError(option.message, requiredData);

      parent.appendChild(label);

      if (option && option.remove) {
        if (
          document.querySelectorAll(
            '[data-error-id="' + element.name + "-error" + '"]'
          )[0]
        ) {
          document.getElementById(element.name + "-error").remove();
          element.removeAttribute("data-error-id");
        }
      }
    };

    data.getLabel = function (field) {
      var _localStorage$getItem;
      var errorStyles =
        "\n            .form-error { \n                font-size: 14px;\n                font-weight: 500;\n                color: var(--red);\n                display: inline-block;\n                margin-top: 5px;\n            }\n        ";
      if (
        document.querySelectorAll('[data-form-error-style="true"]')[0] ==
        undefined
      ) {
        var style = document.createElement("style");
        style.setAttribute("data-form-error-style", "true");
        style.innerHTML = errorStyles;
        document.querySelector("head").appendChild(style);
      }

      field.setAttribute("data-error-id", field.name + "-error");
      var label = document.createElement(
        (_localStorage$getItem = localStorage.getItem("errorElement")) !==
          null && _localStorage$getItem !== void 0
          ? _localStorage$getItem
          : "label"
      );
      label.id = field.name + "-error";
      label.classList.add("form-error");
      return label;
    };

    data.verifyMethods = function (option) {
      var _this4 = this;
      return new Promise(function (resolve, reject) {
        var methods = ["equalTo", "password", "length", "fields", "onSubmit"];
        if (option) {
          (function () {
            var sendMethods = Object.keys(option);

            var _loop = function _loop(i) {
              var found = false;

              methods.forEach(function (method) {
                if (sendMethods[i] == method) {
                  found = true;
                }
              });

              if (!found) {
                var _option$sendMethods$i;
                if (
                  (_option$sendMethods$i = option[sendMethods[i]]) !== null &&
                  _option$sendMethods$i !== void 0 &&
                  _option$sendMethods$i.method
                ) {
                  var _option$sendMethods$i2,
                    _option$sendMethods$i3,
                    _option$sendMethods$i4;

                  var fncElement =
                    (_option$sendMethods$i2 = option[sendMethods[i]]) !==
                      null &&
                    _option$sendMethods$i2 !== void 0 &&
                    _option$sendMethods$i2.element
                      ? document.getElementsByName(
                          option[sendMethods[i]].element
                        )[0]
                      : reject("Element not found");
                  var fncSet =
                    (_option$sendMethods$i3 = option[sendMethods[i]]) !==
                      null &&
                    _option$sendMethods$i3 !== void 0 &&
                    _option$sendMethods$i3.set
                      ? option[sendMethods[i]].set
                      : null;
                  var fncMessage =
                    (_option$sendMethods$i4 = option[sendMethods[i]]) !==
                      null &&
                    _option$sendMethods$i4 !== void 0 &&
                    _option$sendMethods$i4.message
                      ? option[sendMethods[i]].message
                      : "equalTo";

                  var methodReturn = option[sendMethods[i]].method(
                    document.getElementsByName(
                      option[sendMethods[i]].element
                    )[0]
                  );

                  data.optionCheck.push(methodReturn);

                  if (methodReturn == false) {
                    _this4.setMessage(fncElement, {
                      message: fncMessage,
                      set: fncSet,
                    });
                  }
                } else {
                  reject(
                    "Invalid parameter (" +
                      sendMethods[i] +
                      ") | 'method' is missing"
                  );
                }
              }
            };
            for (var i = 0; i < sendMethods.length; i++) {
              _loop(i);
            }
            resolve();
          })();
        }
      });
    };

    data.setValidateRule = function () {
      var formValidRules = ['[data-validate="true"]', '[data-validate="all"]'];
      for (var i = 0; i < formValidRules.length; i++) {
        if (document.querySelectorAll(formValidRules)) {
          document.querySelectorAll(formValidRules).forEach(function (form) {
            form.setAttribute("novalidate", "novalidate");
          });
        }
      }
    };

    data.redirectWhenValid = function () {
      var _this5 = this;
      var forms = document.querySelectorAll('[data-validate="all"]');
      if (forms) {
        forms.forEach(function (form) {
          form.addEventListener("submit", function (e) {
            e.preventDefault();
            data.forms = form.querySelectorAll("[required]");
            _this5.onValidate();
            if (data.error == 0) {
              form.submit();
            }
          });
        });
      }
    };

    data.equalTo = function (option, data) {
      var _this6 = this;
      var checkValues = [];
      var setValue = null;
      var message = "equalTo";
      var fields = data.rules;
      var checkEqual = Array.isArray(option.element)
        ? option.element
        : [option.element];

      if (option.set) {
        setValue = option.set;
      }

      if (option.message) {
        message = option.message;
      }

      checkEqual.forEach(function (element) {
        if (document.getElementsByName(element)[0].value == "") {
          var _message = null;

          if (fields != undefined) {
            _message = _this6.getObjectData(fields, element, "message");
          }

          if (_message == "") {
            _message = "required";
          }

          _this6.setMessage(document.getElementsByName(element)[0], {
            message: _message,
            set: setValue,
          });
        }
        checkValues.push(document.getElementsByName(element)[0].value);
      });
      if (!checkValues.includes("")) {
        var allEqual = function allEqual(arr) {
          return arr.every(function (v) {
            return v === arr[0];
          });
        };
        if (allEqual(checkValues) == false) {
          this.setMessage(document.getElementsByName(checkEqual[1])[0], {
            message: message,
            set: setValue,
          });
          return false;
        } else {
          return true;
        }
      } else {
        return false;
      }
    };

    data.lengthCheck = function (option) {
      var _this7 = this;
      var message = "length";
      var setValue = null;
      var logicCheck = false;
      var elementObj = null;
      var requiredData = {
        message: null,
        size: null,
      };

      if (Array.isArray(option.element)) {
        elementObj = option.element;
      } else {
        elementObj = [option.element];
      }

      elementObj.forEach(function (element) {
        var field = document.getElementsByName(element)[0];

        var logic =
          option === null || option === void 0 ? void 0 : option.logic;
        switch (logic) {
          case "max":
            if (_this7.numberValidate(field.value)) {
              if (parseInt(field.value) > option.size) {
                logicCheck = true;
                message = "max";
              }
            } else {
              logicCheck = true;
              requiredData.message = "Value should be a number";
            }
            break;
          case "min":
            if (_this7.numberValidate(field.value)) {
              if (parseInt(field.value) < option.size) {
                logicCheck = true;
                message = "min";
              }
            } else {
              logicCheck = true;
              requiredData.message = "Value should be a number";
            }
            break;
          case "maxLength":
            if (parseInt(field.value.length) > option.size) {
              logicCheck = true;
              message = "maxLength";
            }
            break;
          case "minLength":
            if (parseInt(field.value.length) < option.size) {
              logicCheck = true;
              message = "minLength";
            }
            break;
        }

        requiredData.size = option.size;

        if (option !== null && option !== void 0 && option.message) {
          message = option.message;
        }

        if (option !== null && option !== void 0 && option.set) {
          setValue = option.set;
        }

        if (logicCheck) {
          _this7.setMessage(
            field,
            {
              message: message,
              set: setValue,
            },
            requiredData
          );
        }
      });

      return logicCheck ? false : true;
    };

    data.emailValidate = function (email) {
      return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(
        email
      );
    };

    data.urlValidate = function (url) {
      var pattern = new RegExp(
        "^(https?:\\/\\/)?" +
          "((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|" +
          "((\\d{1,3}\\.){3}\\d{1,3}))" +
          "(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*" +
          "(\\?[;&a-z\\d%_.~+=-]*)?" +
          "(\\#[-a-z\\d_]*)?$",
        "i"
      );

      return !!pattern.test(url);
    };

    data.checkBoxValidate = function (element) {
      if (!element.checked) {
        return false;
      }
      return true;
    };

    data.radioButtonValidate = function (element) {
      if (document.getElementsByName(element.name).length == 1) {
        if (!element.checked) {
          return false;
        }
        return true;
      } else {
        var checkElement = document.getElementsByName(element.name);
        var isCheckedOne = 0;
        for (var i = 0; i < checkElement.length; i++) {
          if (checkElement[i].checked) {
            isCheckedOne++;
          }
        }
        return isCheckedOne == 1 ? true : false;
      }
    };

    data.numberValidate = function (value) {
      return /^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);
    };
    return data;
  }

  var formInt = new Form();
  formInt.setValidateRule();
  formInt.redirectWhenValid();

  module.exports = Form;
  /******/
})();
